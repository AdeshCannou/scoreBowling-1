<div class="container" #appContainer>
  <h1>Score de Bowling</h1>
  <form (ngSubmit)="submitForm()">
    <div class="form-group">
      <div *ngFor="let player of game.players; index as nbPlayer">
        <table class="table table-bordered table-dark">
          <thead>
            <tr>
              <td class="col" rowspan="3">{{player.name}}</td>
              <td *ngFor="let x of [].constructor(game.rounds); 
                index as i" class="col" 
                [attr.colspan]="state[player.name][i].length">
                Tour : {{ i+1 }}
              </td>
            </tr>
            <tr>
              <td *ngFor="let x of [].constructor(game.rounds * 2) ; index as i" class="col" colspan="1">
                  {{ i % 2 == 0 ? state[player.name][i/2][0] == -1 ? '' : state[player.name][(i/2)][0] : state[player.name][(i-1)/2][1] 
                    == -1 ? '' : state[player.name][(i-1)/2][1]
                }}
              </td>
              <td class="col" colspan="1">
                {{ (state[player.name][game.rounds - 1][2]) == -1 ? '' : state[player.name][game.rounds - 1][2]  }}
              </td>
            </tr>
            <tr>
              <td *ngFor="let x of [].constructor(game.rounds ) ; index as i" 
              [attr.colspan]="state[player.name][i].length" class="col" >
                Total : {{ player.scores[i] ? player.scores[i].total : ''}}
              </td>
            </tr>
          </thead>
        </table>
      </div>
    </div>

    <button type="submit" class="btn btn-primary">Save game</button>
  </form>

  <div class="form-group" >
    <div class="form-check form-check-inline" *ngFor="let i of [].constructor(game.pins - nbScoreLast + 1) ; index as nbPin">
      
      <input class="form-check-input" type="radio" name="nbPinRadio" [value]="nbPin" [(ngModel)]="selectedNbPins">
      <label class="form-check-label">{{nbPin}}</label>
    </div>
    <button type="submit" class="btn btn-primary" (click)="register_score_tour()">Register score</button>
  </div>
  
</div>